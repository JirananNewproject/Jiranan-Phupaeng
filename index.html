<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thailand Countdown Ultimate V6</title>

<link rel="apple-touch-icon" href="icon.png">
<link rel="icon" type="image/png" href="icon.png">
<meta name="theme-color" content="#0d47a1">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="manifest" href="manifest.json">

<style>
body{
    font-family:sans-serif;
    text-align:center;
    margin:0;
    padding:20px;
    background:linear-gradient(to right,#0d47a1,#42a5f5);
    color:white;
}
.card{
    background:white;
    color:#333;
    padding:20px;
    border-radius:20px;
    max-width:95%;
    margin:auto;
}
.progress{
    width:100%;
    background:#ddd;
    border-radius:10px;
}
.bar{
    height:15px;
    background:#4caf50;
    width:0%;
}
.celebrate{
    font-size:40px;
    display:none;
    animation:pop 1s infinite alternate;
}
@keyframes pop{
    from{transform:scale(1);}
    to{transform:scale(1.2);}
}

/* ===== Calendar ===== */
#calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
    margin-top: 10px;
}
.calendar-day, .calendar-weekday {
    padding: 8px;
    background:#f0f0f0;
    border-radius:5px;
    text-align:center;
    word-wrap: break-word;
    font-size:14px;
}
.calendar-weekday {
    font-weight:bold;
    background:#90caf9;
    color:#0d47a1;
}
.calendar-day.travel {
    background:#ff9800;
    color:white;
}
.calendar-day.work {
    background:#4caf50;
    color:white;
}
.calendar-day.today {
    border:2px solid #0d47a1;
}

/* ===== Responsive ===== */
@media screen and (max-width: 480px) {
    #calendar {
        grid-template-columns: repeat(7, 1fr);
    }
    .calendar-day, .calendar-weekday {
        font-size:12px;
        padding:6px;
    }
}
</style>
</head>
<body>

<div class="card">
<h2>à¸™à¸±à¸šà¸–à¸­à¸¢à¸«à¸¥à¸±à¸‡à¸§à¸±à¸™à¸à¸¥à¸±à¸šà¸šà¹‰à¸²à¸™ ğŸ˜ŠğŸ‡¹ğŸ‡­</h2>

<p>à¸§à¸±à¸™à¸šà¸´à¸™à¸à¸¥à¸±à¸š:</p>
<input type="datetime-local" id="end">
<button onclick="saveDate()">à¸šà¸±à¸™à¸—à¸¶à¸</button>

<h3 id="countdown"></h3>
<div class="progress"><div class="bar" id="bar"></div></div>
<div id="percent"></div>

<hr>
<h3>ğŸŒ à¹€à¸§à¸¥à¸²à¹‚à¸¥à¸</h3>
<div id="world"></div>

<hr>
<h3>ğŸ›« à¹€à¸ªà¹‰à¸™à¸—à¸²à¸‡à¸šà¸´à¸™ (Transit)</h3>
<div>
ADD â†’ Singapore (SIN) â†’ Kuala Lumpur (KUL) â†’ BKK<br>
à¸§à¸±à¸™à¸šà¸´à¸™à¸à¸¥à¸±à¸š: 23 à¹€à¸¡à¸©à¸²à¸¢à¸™ 2026
</div>

<hr>
<h3>ğŸŒ¤ à¸­à¸²à¸à¸²à¸¨à¸§à¸±à¸™à¹€à¸”à¸´à¸™à¸—à¸²à¸‡</h3>
<div id="weather">à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸ªà¸ à¸²à¸à¸­à¸²à¸à¸²à¸¨...</div>

<hr>
<h3>ğŸ“† à¸›à¸à¸´à¸—à¸´à¸™</h3>
<button onclick="prevMonth()">â—€ à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸²</button>
<button onclick="nextMonth()">à¸–à¸±à¸”à¹„à¸› â–¶</button>
<div id="calendar"></div>

<div class="celebrate" id="celebrate">ğŸ‰ğŸ‡¹ğŸ‡­âœˆï¸</div>
</div>

<script>
// =================== SERVICE WORKER ===================
if('serviceWorker' in navigator){
    navigator.serviceWorker.register('sw.js');
}

// =================== COUNTDOWN + PROGRESS ===================
let endDate = new Date(localStorage.getItem("end") || "2026-04-23T12:00");
document.getElementById("end").value = endDate.toISOString().slice(0,16);
const startDate = new Date("2026-02-05"); // à¸§à¸±à¸™à¸—à¸³à¸‡à¸²à¸™à¹à¸£à¸

function saveDate(){
    endDate = new Date(document.getElementById("end").value);
    localStorage.setItem("end",endDate);
}

function update(){
    let now = new Date();
    let remain = endDate - now;

    if(remain <= 0){
        document.getElementById("countdown").innerHTML="ğŸ‰ à¸–à¸¶à¸‡à¸§à¸±à¸™à¸à¸¥à¸±à¸šà¹„à¸—à¸¢à¹à¸¥à¹‰à¸§!";
        document.getElementById("celebrate").style.display="block";
    } else {
        let d = Math.floor(remain/86400000);
        let h = Math.floor((remain%86400000)/3600000);
        let m = Math.floor((remain%3600000)/60000);
        let s = Math.floor((remain%60000)/1000);

        document.getElementById("countdown").innerHTML =
            `à¹€à¸«à¸¥à¸·à¸­ ${d} à¸§à¸±à¸™ ${h} à¸Šà¸¡ ${m} à¸™à¸²à¸—à¸µ ${s} à¸§à¸´`;

        // Progress bar à¸­à¸´à¸‡à¸§à¸±à¸™à¸—à¸³à¸‡à¸²à¸™à¹à¸£à¸ â†’ à¸§à¸±à¸™à¸šà¸´à¸™à¸à¸¥à¸±à¸šà¹„à¸—à¸¢
        let total = endDate - startDate;
        let passed = now - startDate;
        let percent = Math.min(Math.max((passed / total) * 100, 0), 100);

        document.getElementById("bar").style.width = percent + "%";
        document.getElementById("percent").innerHTML = "à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸² "+percent.toFixed(1)+"%";
    }

    // à¹€à¸§à¸¥à¸²à¹‚à¸¥à¸
    let thai = new Date().toLocaleString("th-TH",{timeZone:"Asia/Bangkok"});
    let eth = new Date().toLocaleString("en-GB",{timeZone:"Africa/Addis_Ababa"});
    let sin = new Date().toLocaleString("en-GB",{timeZone:"Asia/Singapore"});
    let kul = new Date().toLocaleString("en-GB",{timeZone:"Asia/Kuala_Lumpur"});

    document.getElementById("world").innerHTML =
        `ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢: ${thai}<br>` +
        `ğŸ‡ªğŸ‡¹ à¹€à¸­à¸˜à¸´à¹‚à¸­à¹€à¸›à¸µà¸¢: ${eth}<br>` +
        `ğŸ‡¸ğŸ‡¬ à¸ªà¸´à¸‡à¸„à¹‚à¸›à¸£à¹Œ: ${sin}<br>` +
        `ğŸ‡²ğŸ‡¾ à¸à¸±à¸§à¸¥à¸²à¸¥à¸±à¸¡à¹€à¸›à¸­à¸£à¹Œ: ${kul}`;
}

setInterval(update,1000);
update();

// =================== WEATHER ===================
const apiKey = "YOUR_API_KEY"; // à¹ƒà¸ªà¹ˆ API Key à¸‚à¸­à¸‡ OpenWeather
const city = "Bangkok,TH";

function fetchWeather() {
    fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`)
    .then(res => res.json())
    .then(data => {
        let temp = data.main.temp.toFixed(1);
        let desc = data.weather[0].description;
        document.getElementById("weather").innerHTML = `ğŸŒ¡ ${temp}Â°C, ${desc}`;
    })
    .catch(err=>{
        console.log(err);
        document.getElementById("weather").innerHTML = "à¹‚à¸«à¸¥à¸”à¸ªà¸ à¸²à¸à¸­à¸²à¸à¸²à¸¨à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ";
    });
}
fetchWeather();
setInterval(fetchWeather, 10*60*1000);

// =================== CALENDAR ===================
let calYear = new Date().getFullYear();
let calMonth = new Date().getMonth();

const travelDate = new Date("2026-04-23");
const workDate = new Date("2026-02-05");

function generateCalendar(year, month){
    const calendar = document.getElementById("calendar");
    calendar.innerHTML = "";

    const weekdays = ["à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ","à¸ˆà¸±à¸™à¸—à¸£à¹Œ","à¸­à¸±à¸‡à¸„à¸²à¸£","à¸à¸¸à¸˜","à¸à¸¤à¸«à¸±à¸ªà¸šà¸”à¸µ","à¸¨à¸¸à¸à¸£à¹Œ","à¹€à¸ªà¸²à¸£à¹Œ"];
    weekdays.forEach(dayName=>{
        let day = document.createElement("div");
        day.className="calendar-weekday";
        day.textContent=dayName;
        calendar.appendChild(day);
    });

    const firstDay = new Date(year, month, 1).getDay();
    const lastDate = new Date(year, month+1, 0).getDate();

    for(let i=0;i<firstDay;i++){
        let empty = document.createElement("div");
        calendar.appendChild(empty);
    }

    for(let d=1; d<=lastDate; d++){
        let day = document.createElement("div");
        day.className="calendar-day";
        day.textContent=d;

        let thisDate = new Date(year, month, d);

        if(thisDate.toDateString() === travelDate.toDateString()){
            day.classList.add("travel");
        }
        if(thisDate.toDateString() === workDate.toDateString()){
            day.classList.add("work");
        }
        const today = new Date();
        if(thisDate.toDateString() === today.toDateString()){
            day.classList.add("today");
        }

        calendar.appendChild(day);
    }
}

function prevMonth(){
    calMonth--;
    if(calMonth < 0){
        calMonth = 11;
        calYear--;
    }
    generateCalendar(calYear, calMonth);
}
function nextMonth(){
    calMonth++;
    if(calMonth > 11){
        calMonth = 0;
        calYear++;
    }
    generateCalendar(calYear, calMonth);
}

generateCalendar(calYear, calMonth);
</script>

</body>
</html>
